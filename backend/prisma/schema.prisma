generator client {
  provider = "prisma-client-js"
}


// ====================================================
// SETUP DATASORUCE
// ----------------------------------------------------
// provider = mysql | postgresql | sqlite | sqlserver
// ====================================================
datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}


// ====================================================
// MEMBUAT TABEL USER
// ====================================================
model User {
  id        String   @id @default(cuid())
  username  String
  password  String
  image     String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ------------------------------------------------
  // USER MEMPUNYAI RELASI KE PRODUCT
  // ------------------------------------------------
  productsCreated Product[] @relation("ProductsCreatedBy")
  productsUpdated Product[] @relation("ProductsUpdated")

  @@map("users")
}


// ===============================================
// MEMBUAT TABEL CATEGORY
// ===============================================
model Category {
  id        String   @id @default(cuid())
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ------------------------------------------------
  // CATEGORY MEMPUNYAI RELASI KE PRODUCT
  // ------------------------------------------------
  products Product[]

  @@map("categories")
}


// ===============================================
// MEMBUAT TABEL PRODUCT
// ===============================================
model Product {
  id                String   @id @default(cuid())
  name              String
  qty               Int
  categoryId        String
  category          Category @relation(fields: [categoryId], references: [id])
  url_product_image String?

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())

  created_by String
  updated_by String

  createdBy User @relation("ProductsCreatedBy", fields: [created_by], references: [id])
  updatedBy User @relation("ProductsUpdated", fields: [updated_by], references: [id])

  @@map("products")
}
